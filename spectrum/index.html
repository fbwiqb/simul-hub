<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì›ì†Œ ìŠ¤í™íŠ¸ëŸ¼ í€´ì¦ˆ</title>
    <style>
        :root {
            --bg: #3d4e9f;
            --container-bg: rgba(255,255,255,0.95);
            --text: #333;
            --text-dim: #666;
            --primary: #3d4e9f;
            --primary-dark: #2d3e8f;
            --accent: #27ae60;
            --danger: #e74c3c;
            --border: #ddd;
            --card-bg: white;
            --hover-bg: #f0f0ff;
            --success-bg: #d4edda;
            --success-text: #155724;
            --warn-bg: #fff3cd;
            --warn-text: #856404;
            --radius: 10px;
            --radius-sm: 6px;
        }
        body.dark-mode {
            --bg: #0a0a1a;
            --container-bg: rgba(20,20,40,0.95);
            --text: #e0e0e0;
            --text-dim: #999;
            --border: #333;
            --card-bg: #1a1a2e;
            --hover-bg: #252540;
            --success-bg: #1a3a1a;
            --success-text: #4caf50;
            --warn-bg: #3a3000;
            --warn-text: #ffc107;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background: var(--bg);
            min-height: 100vh;
            padding: 15px;
            padding-bottom: 55px;
            transition: background 0.3s;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: var(--container-bg);
            border-radius: var(--radius);
            padding: 15px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.2);
            height: calc(100vh - 85px);
            display: flex;
            flex-direction: column;
            color: var(--text);
            transition: background 0.3s, color 0.3s;
        }
        .header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
            flex-shrink: 0;
        }
        .header h1 {
            color: var(--primary);
            font-size: 1.4em;
            font-weight: 700;
        }
        body.dark-mode .header h1 { color: #7b8ed6; }
        .dark-toggle {
            background: none;
            border: 2px solid var(--primary);
            color: var(--primary);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }
        body.dark-mode .dark-toggle { border-color: #7b8ed6; color: #ffd700; }
        .dark-toggle:hover { transform: scale(1.1); }
        .ref-spectrum {
            flex-shrink: 0;
            margin-bottom: 10px;
            position: relative;
        }
        .ref-spectrum-bar {
            height: 32px;
            border-radius: var(--radius-sm);
            overflow: hidden;
            position: relative;
            border: 1px solid var(--border);
        }
        .ref-spectrum-labels {
            display: flex;
            justify-content: space-between;
            font-size: 11px;
            color: var(--text-dim);
            margin-top: 3px;
            padding: 0 2px;
        }
        .main-content {
            display: flex;
            gap: 12px;
            flex: 1;
            min-height: 0;
        }
        .left-panel {
            flex: 2;
            display: flex;
            flex-direction: column;
        }
        .right-panel {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .spectrum-display {
            background: var(--card-bg);
            border-radius: var(--radius);
            padding: 8px;
            border: 1px solid var(--border);
            flex: 1;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }
        .spectrum-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 6px;
            height: 100%;
        }
        .element-spectrum {
            border: 2px solid transparent;
            border-radius: var(--radius-sm);
            padding: 4px 6px;
            display: flex;
            flex-direction: column;
            min-height: 0;
            cursor: pointer;
            transition: all 0.2s;
        }
        .element-spectrum:hover { background: var(--hover-bg); }
        .element-spectrum.highlighted {
            border-color: #ff4444;
            background: rgba(255,68,68,0.1);
        }
        .element-spectrum.overlay-active {
            border-color: #f39c12;
            background: rgba(243,156,18,0.1);
        }
        .element-label {
            font-weight: 700;
            margin-bottom: 2px;
            font-size: 11px;
            text-align: center;
            color: var(--primary);
        }
        body.dark-mode .element-label { color: #7b8ed6; }
        .spectrum-bar {
            height: 22px;
            background: #000;
            position: relative;
            border: 1px solid var(--border);
            border-radius: 3px;
            flex-shrink: 0;
        }
        .quiz-spectrum .spectrum-bar { height: 50px; }
        .spectral-line {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 3px;
        }
        .spectral-line-overlay {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 4px;
            opacity: 0.6;
            border: 1px dashed white;
            z-index: 2;
        }
        .wl-tooltip {
            position: absolute;
            top: -24px;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.85);
            color: white;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 10px;
            white-space: nowrap;
            pointer-events: none;
            z-index: 10;
            opacity: 0;
            transition: opacity 0.15s;
        }
        .spectral-line:hover .wl-tooltip,
        .spectral-line-overlay:hover .wl-tooltip { opacity: 1; }
        .wavelength-scale {
            display: flex;
            justify-content: space-between;
            margin-top: 1px;
            font-size: 8px;
            color: var(--text-dim);
            flex-shrink: 0;
        }
        .controls {
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .control-row {
            display: flex;
            gap: 8px;
            align-items: center;
        }
        .toggle-group {
            display: flex;
            border-radius: var(--radius-sm);
            overflow: hidden;
            border: 2px solid var(--primary);
        }
        .toggle-btn {
            padding: 7px 14px;
            border: none;
            background: var(--card-bg);
            color: var(--primary);
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        .toggle-btn.active { background: var(--primary); color: white; }
        body.dark-mode .toggle-btn { background: #1a1a2e; color: #7b8ed6; }
        body.dark-mode .toggle-btn.active { background: #4a5abf; color: white; }
        body.dark-mode .toggle-group { border-color: #4a5abf; }
        .count-slider {
            flex: 1;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .count-slider input[type="range"] { flex: 1; accent-color: var(--primary); }
        .count-slider .count-label {
            font-size: 13px;
            font-weight: 700;
            color: var(--primary);
            min-width: 30px;
            text-align: center;
        }
        body.dark-mode .count-slider .count-label { color: #7b8ed6; }
        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 8px 14px;
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-size: 12px;
            font-weight: 700;
            transition: all 0.2s;
        }
        .btn:hover { background: var(--primary-dark); transform: translateY(-1px); }
        .btn:active { transform: translateY(0); }
        .btn-start { background: var(--accent); flex: 1; }
        .btn-start:hover { background: #229954; }
        .btn-show { background: var(--accent); }
        .btn-show:hover { background: #229954; }
        .btn-hide { background: var(--danger); }
        .btn-hide:hover { background: #c0392b; }
        .timer-toggle {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
            color: var(--text-dim);
        }
        .timer-toggle input[type="checkbox"] { accent-color: var(--primary); }
        .timer-bar {
            height: 4px;
            background: var(--border);
            border-radius: 2px;
            overflow: hidden;
            display: none;
        }
        .timer-bar.active { display: block; }
        .timer-bar-fill {
            height: 100%;
            background: var(--accent);
            border-radius: 2px;
            transition: width 0.1s linear;
        }
        .timer-bar-fill.warning { background: #f39c12; }
        .timer-bar-fill.danger { background: var(--danger); }
        .quiz-section {
            background: var(--card-bg);
            border-radius: var(--radius);
            padding: 12px;
            border: 1px solid var(--border);
            flex: 1;
            display: flex;
            flex-direction: column;
            min-height: 0;
        }
        .quiz-section.hidden { display: none; }
        .quiz-spectrum { margin-bottom: 8px; flex-shrink: 0; }
        .quiz-spectrum h3 {
            margin-bottom: 6px;
            text-align: center;
            color: var(--primary);
            font-size: 13px;
            font-weight: 700;
        }
        body.dark-mode .quiz-spectrum h3 { color: #7b8ed6; }
        .checkbox-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 6px;
            flex: 1;
            overflow-y: auto;
            align-content: start;
        }
        .checkbox-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            padding: 8px 6px;
            border-radius: var(--radius-sm);
            transition: all 0.2s;
            cursor: pointer;
            border: 2px solid var(--border);
            background: var(--card-bg);
            user-select: none;
        }
        .checkbox-item:hover { background: var(--hover-bg); border-color: var(--primary); }
        .checkbox-item.selected { background: var(--primary); color: white; border-color: var(--primary); }
        body.dark-mode .checkbox-item.selected { background: #4a5abf; border-color: #4a5abf; }
        .checkbox-item .cb-name { font-size: 13px; font-weight: 700; }
        .checkbox-item .cb-mini-spectrum {
            width: 100%;
            height: 10px;
            background: #000;
            border-radius: 2px;
            position: relative;
            overflow: hidden;
        }
        .checkbox-item.selected .cb-mini-spectrum { opacity: 0.7; }
        .submit-btn {
            background: var(--danger);
            color: white;
            border: none;
            padding: 10px;
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-size: 14px;
            font-weight: 700;
            margin-top: 8px;
            flex-shrink: 0;
            transition: all 0.2s;
        }
        .submit-btn:hover { background: #c0392b; transform: translateY(-1px); }
        .submit-btn:active { transform: translateY(0); }
        .result-message {
            margin-top: 6px;
            padding: 8px;
            border-radius: var(--radius-sm);
            text-align: center;
            font-weight: 700;
            font-size: 12px;
            flex-shrink: 0;
        }
        .result-success { background: var(--success-bg); color: var(--success-text); }
        .result-partial { background: var(--warn-bg); color: var(--warn-text); }
        @keyframes confettiFall {
            0% { transform: translateY(-100%) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }
        .confetti {
            position: fixed;
            top: 0;
            width: 8px;
            height: 8px;
            border-radius: 2px;
            z-index: 9999;
            pointer-events: none;
            animation: confettiFall 2s ease-out forwards;
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        .shake { animation: shake 0.4s ease; }
        .footer-container {
            position: fixed;
            bottom: 8px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .copyright {
            font-size: 10px;
            color: rgba(255,255,255,0.6);
            text-align: center;
            line-height: 1.4;
        }
        .copyright a { color: rgba(255,255,255,0.7); text-decoration: none; }
        .copyright a:hover { color: white; }
        .footer-btn {
            background: rgba(61,78,159,0.7);
            color: white;
            border: 1px solid rgba(255,255,255,0.2);
            padding: 6px 12px;
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-size: 10px;
            font-weight: 600;
            transition: all 0.2s;
            white-space: nowrap;
        }
        .footer-btn:hover { background: rgba(61,78,159,1); transform: translateY(-1px); }
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0; top: 0;
            width: 100%; height: 100%;
            background: rgba(0,0,0,0.5);
        }
        .modal.show { display: flex; align-items: center; justify-content: center; }
        .modal-content {
            background: var(--card-bg);
            border: 1px solid var(--border);
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            border-radius: var(--radius);
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        .modal-header {
            background: var(--primary);
            color: white;
            padding: 12px 18px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: var(--radius) var(--radius) 0 0;
        }
        body.dark-mode .modal-header { background: #2a2a4a; }
        .modal-header h2 { margin: 0; font-size: 1.2em; }
        .modal-close {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            width: 28px; height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .modal-close:hover { opacity: 0.7; }
        .modal-body { padding: 18px; }
        .log-entry { margin-bottom: 16px; padding-bottom: 16px; border-bottom: 1px solid var(--border); }
        .log-entry:last-child { border-bottom: none; }
        .log-date { color: var(--primary); font-weight: 700; margin-bottom: 6px; font-size: 13px; }
        body.dark-mode .log-date { color: #7b8ed6; }
        .log-text { color: var(--text); line-height: 1.6; font-size: 12px; }
        .log-text strong { color: var(--primary); }
        body.dark-mode .log-text strong { color: #7b8ed6; }
        .log-text a { color: var(--primary); word-break: break-all; }
        @media (max-width: 768px) {
            body { padding: 8px; padding-bottom: 50px; }
            .container { height: auto; min-height: calc(100vh - 60px); }
            .main-content { flex-direction: column; }
            .left-panel { max-height: 40vh; }
            .spectrum-grid { grid-template-columns: repeat(2, 1fr); overflow-y: auto; }
            .header h1 { font-size: 1.1em; }
        }
        @media (max-width: 480px) {
            .spectrum-grid { grid-template-columns: 1fr; }
            .checkbox-grid { grid-template-columns: repeat(2, 1fr); }
            .control-row { flex-wrap: wrap; }
            .header { flex-wrap: wrap; gap: 6px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ì›ì†Œ ìŠ¤í™íŠ¸ëŸ¼ í€´ì¦ˆ</h1>
            <button class="dark-toggle" id="darkToggle" title="ë‹¤í¬ëª¨ë“œ">â˜€ï¸</button>
        </div>
        <div class="ref-spectrum">
            <div class="ref-spectrum-bar" id="refSpectrum"></div>
            <div class="ref-spectrum-labels">
                <span>380nm</span><span>450</span><span>500</span><span>550</span><span>600</span><span>650</span><span>700</span><span>750nm</span>
            </div>
        </div>
        <div class="main-content">
            <div class="left-panel">
                <div class="spectrum-display">
                    <div class="spectrum-grid" id="spectrumGrid"></div>
                </div>
            </div>
            <div class="right-panel">
                <div class="controls">
                    <div class="control-row">
                        <div class="toggle-group">
                            <button class="toggle-btn active" id="toggleEmission">ë°©ì¶œ</button>
                            <button class="toggle-btn" id="toggleAbsorption">í¡ìˆ˜</button>
                        </div>
                        <div class="count-slider">
                            <span style="font-size:11px;color:var(--text-dim)">ì›ì†Œ</span>
                            <input type="range" id="countSlider" min="2" max="6" value="3">
                            <span class="count-label" id="countLabel">3ê°œ</span>
                        </div>
                    </div>
                    <div class="control-row">
                        <button class="btn btn-start" id="btnStart">ë¬¸ì œ ì¶œì œ</button>
                        <button class="btn btn-show" id="btnShowAnswer">ì •ë‹µ í‘œì‹œ</button>
                        <button class="btn btn-hide" id="btnHideAnswer">ì •ë‹µ ìˆ¨ê¹€</button>
                    </div>
                    <div class="control-row">
                        <label class="timer-toggle">
                            <input type="checkbox" id="timerToggle"> íƒ€ì´ë¨¸ (30ì´ˆ)
                        </label>
                    </div>
                    <div class="timer-bar" id="timerBar">
                        <div class="timer-bar-fill" id="timerFill" style="width:100%"></div>
                    </div>
                </div>
                <div class="quiz-section hidden" id="quizSection">
                    <div class="quiz-spectrum" id="quizSpectrum"></div>
                    <div class="checkbox-grid" id="checkboxGrid"></div>
                    <button class="submit-btn" id="btnSubmit">ì •ë‹µ í™•ì¸</button>
                    <div id="resultMessage"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="footer-container">
        <div class="copyright">â“’ 2025 ì¶©ë‚¨ì‚¼ì„±ê³ ë“±í•™êµ ì‹ ë„ê²½T<br><a href="mailto:pantarei01@cnsa.hs.kr">pantarei01@cnsa.hs.kr</a></div>
        <button class="footer-btn" id="TutorialBtn">ì‚¬ìš©ë²•</button>
        <button class="footer-btn" id="DevLogBtn">ê°œë°œì ë¡œê·¸</button>
    </div>

    <div class="modal" id="tutorialModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ì‚¬ìš©ë²• ì•ˆë‚´</h2>
                <button class="modal-close" id="closeTutorialModal">Ã—</button>
            </div>
            <div class="modal-body">
                <div class="log-entry">
                    <div class="log-date">í”„ë¡œê·¸ë¨ ì†Œê°œ</div>
                    <div class="log-text">
                        <strong>ì›ì†Œ ìŠ¤í™íŠ¸ëŸ¼ í€´ì¦ˆ</strong>ëŠ” ê° ì›ì†Œì˜ ê³ ìœ í•œ ìŠ¤í™íŠ¸ëŸ¼ íŒ¨í„´ì„ í•™ìŠµí•˜ê³ , í˜¼í•©ëœ ìŠ¤í™íŠ¸ëŸ¼ì—ì„œ ì›ì†Œë¥¼ ì‹ë³„í•˜ëŠ” ëŠ¥ë ¥ì„ í‚¤ìš°ê¸° ìœ„í•œ êµìœ¡ìš© í”„ë¡œê·¸ë¨ì…ë‹ˆë‹¤.
                    </div>
                </div>
                <div class="log-entry">
                    <div class="log-date">ê¸°ë³¸ ì‚¬ìš©ë²•</div>
                    <div class="log-text">
                        <strong>1. ìŠ¤í™íŠ¸ëŸ¼ ìœ í˜• ì„ íƒ</strong><br>
                        â€¢ ìƒë‹¨ì—ì„œ ë°©ì¶œ/í¡ìˆ˜ ìŠ¤í™íŠ¸ëŸ¼ ìœ í˜•ì„ ì„ íƒí•©ë‹ˆë‹¤.<br>
                        â€¢ ìŠ¬ë¼ì´ë”ë¡œ í˜¼í•©í•  ì›ì†Œ ìˆ˜(2~6ê°œ)ë¥¼ ì¡°ì ˆí•©ë‹ˆë‹¤.<br><br>
                        <strong>2. ë¬¸ì œ ì¶œì œ</strong><br>
                        â€¢ "ë¬¸ì œ ì¶œì œ" ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ í˜¼í•© ìŠ¤í™íŠ¸ëŸ¼ì´ ìƒì„±ë©ë‹ˆë‹¤.<br>
                        â€¢ íƒ€ì´ë¨¸ë¥¼ ì¼œë©´ 30ì´ˆ ì œí•œ ì‹œê°„ì´ ì ìš©ë©ë‹ˆë‹¤.<br><br>
                        <strong>3. ë¹„êµ ê¸°ëŠ¥</strong><br>
                        â€¢ ì™¼ìª½ ì›ì†Œ ìŠ¤í™íŠ¸ëŸ¼ì„ í´ë¦­í•˜ë©´ í€´ì¦ˆ ìŠ¤í™íŠ¸ëŸ¼ ìœ„ì— í•´ë‹¹ ì›ì†Œì˜ ì„ ì´ ì˜¤ë²„ë ˆì´ë©ë‹ˆë‹¤.<br>
                        â€¢ ë‹¤ì‹œ í´ë¦­í•˜ë©´ ì˜¤ë²„ë ˆì´ê°€ í•´ì œë©ë‹ˆë‹¤.<br><br>
                        <strong>4. ì›ì†Œ ì„ íƒ & ì •ë‹µ í™•ì¸</strong><br>
                        â€¢ ì˜¤ë¥¸ìª½ ì›ì†Œ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ë‹µì„ ì„ íƒí•©ë‹ˆë‹¤.<br>
                        â€¢ ê° ë²„íŠ¼ì—ëŠ” ë¯¸ë‹ˆ ìŠ¤í™íŠ¸ëŸ¼ì´ í‘œì‹œë˜ì–´ ì°¸ê³ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
                        â€¢ "ì •ë‹µ í™•ì¸"ì„ ëˆŒëŸ¬ ê²°ê³¼ë¥¼ í™•ì¸í•˜ì„¸ìš”.<br><br>
                        <strong>5. íŒŒì¥ í™•ì¸</strong><br>
                        â€¢ ìŠ¤í™íŠ¸ëŸ¼ ì„ ì— ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë¦¬ë©´ ì •í™•í•œ íŒŒì¥(nm)ì´ í‘œì‹œë©ë‹ˆë‹¤.
                    </div>
                </div>
                <div class="log-entry">
                    <div class="log-date">í•™ìŠµ íŒ</div>
                    <div class="log-text">
                        â€¢ ì‰¬ìš´ ë¬¸ì œ(2ê°œ)ë¶€í„° ì‹œì‘í•´ì„œ ì ì°¨ ë‚œì´ë„ë¥¼ ë†’ì´ì„¸ìš”.<br>
                        â€¢ ìˆ˜ì†Œ(H): ë¹¨ê°•, ì²­ë¡, ë‚¨ìƒ‰, ë³´ë¼ìƒ‰ 4ê°œì˜ ì„ <br>
                        â€¢ í—¬ë¥¨(He): ë…¸ë‘~ì£¼í™© ì˜ì—­ì— ì—¬ëŸ¬ ì„ <br>
                        â€¢ ë‚˜íŠ¸ë¥¨(Na): ë…¸ë€ìƒ‰ ì˜ì—­ì— ë°ì€ ì´ì¤‘ì„ ì´ íŠ¹ì§•<br>
                        â€¢ ìˆ˜ì€(Hg): ì´ˆë¡ìƒ‰ ì„ ì´ ë§¤ìš° ë°ê²Œ ë‚˜íƒ€ë‚¨<br>
                        â€¢ ë‹¤í¬ëª¨ë“œì—ì„œ ìŠ¤í™íŠ¸ëŸ¼ì´ ë” ì„ ëª…í•˜ê²Œ ë³´ì…ë‹ˆë‹¤.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="devLogModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ê°œë°œì ë¡œê·¸</h2>
                <button class="modal-close" id="closeModal">Ã—</button>
            </div>
            <div class="modal-body">
                <div class="log-entry">
                    <div class="log-date">2026. 02. 22.</div>
                    <div class="log-text">
                        <strong>v2.0 ëŒ€ê·œëª¨ ì—…ë°ì´íŠ¸</strong><br>
                        ìŠ¤í™íŠ¸ëŸ¼ ë¹„êµ ì˜¤ë²„ë ˆì´, íŒŒì¥ íˆ´íŒ, íƒ€ì´ë¨¸ ëª¨ë“œ, ì—°ì† ìŠ¤í™íŠ¸ëŸ¼ ê¸°ì¤€ì„ , ì›ì†Œ ì¶”ê°€(Ca, Fe, Ba), ë‹¤í¬ëª¨ë“œ, ëª¨ë°”ì¼ ëŒ€ì‘ ë“± ê°œì„ ì‚¬í•­ ì ìš©.
                    </div>
                </div>
                <div class="log-entry">
                    <div class="log-date">2025. 10. 13.</div>
                    <div class="log-text">
                        <strong>ì›ì†Œ ìŠ¤í™íŠ¸ëŸ¼ ì„œë¹„ìŠ¤ ì‹œì‘</strong><br>
                        ì›ì†Œ ìŠ¤í™íŠ¸ëŸ¼ í€´ì¦ˆ ì„œë¹„ìŠ¤ë¥¼ ì‹œì‘í•˜ì˜€ìŠµë‹ˆë‹¤. <a href="https://blog.naver.com/rainshadow21/224039391343" target="_blank">ë¸”ë¡œê·¸ ë§í¬</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const ELEMENTS = {
            'H': [410.2, 434.0, 486.1, 656.3],
            'He': [447.1, 471.3, 492.2, 501.6, 587.6, 667.8, 706.5],
            'Ne': [540.1, 585.2, 614.3, 640.2, 650.7, 703.2],
            'Na': [498.3, 568.3, 568.8, 588.9, 589.6, 615.4, 616.1],
            'Hg': [404.7, 435.8, 546.1, 577.0, 579.1],
            'Li': [460.3, 497.2, 610.4, 670.8],
            'Kr': [427.4, 431.9, 436.3, 450.2, 557.0, 587.1, 760.2, 769.5],
            'Ca': [393.4, 396.8, 422.7, 445.5, 527.0, 612.2, 616.2, 643.9],
            'Fe': [404.6, 438.4, 466.8, 495.8, 516.7, 527.0, 532.8],
            'Ba': [455.4, 493.4, 553.5, 585.4, 611.1, 649.7, 659.5]
        };

        const ELEMENT_NAMES = {
            'H':'ìˆ˜ì†Œ','He':'í—¬ë¥¨','Ne':'ë„¤ì˜¨','Na':'ë‚˜íŠ¸ë¥¨',
            'Hg':'ìˆ˜ì€','Li':'ë¦¬íŠ¬','Kr':'í¬ë¦½í†¤',
            'Ca':'ì¹¼ìŠ˜','Fe':'ì² ','Ba':'ë°”ë¥¨'
        };

        const allElements = Object.keys(ELEMENTS);
        let selectedElements = [];
        let quizMode = 'emission';
        let overlayElement = null;
        let timerInterval = null;

        function wavelengthToRgb(wavelength, gamma) {
            gamma = gamma || 0.8;
            let r = 0, g = 0, b = 0;
            if (wavelength < 380 || wavelength > 750) return 'rgb(0,0,0)';
            if (wavelength < 440) { r = -(wavelength - 440) / 60; b = 1; }
            else if (wavelength < 490) { g = (wavelength - 440) / 50; b = 1; }
            else if (wavelength < 510) { g = 1; b = -(wavelength - 510) / 20; }
            else if (wavelength < 580) { r = (wavelength - 510) / 70; g = 1; }
            else if (wavelength < 645) { r = 1; g = -(wavelength - 645) / 65; }
            else { r = 1; }
            var factor = 1.0;
            if (wavelength < 420) factor = 0.3 + 0.7 * (wavelength - 380) / 40;
            else if (wavelength > 645) factor = 0.3 + 0.7 * (750 - wavelength) / 105;
            return 'rgb(' + Math.round(Math.pow(r * factor, gamma) * 255) + ',' + Math.round(Math.pow(g * factor, gamma) * 255) + ',' + Math.round(Math.pow(b * factor, gamma) * 255) + ')';
        }

        function wlToPercent(wl) { return ((wl - 380) / 370) * 100; }

        function buildRefSpectrum() {
            var bar = document.getElementById('refSpectrum');
            bar.innerHTML = '';
            var stops = [];
            for (var wl = 380; wl <= 750; wl += 5) {
                stops.push(wavelengthToRgb(wl) + ' ' + wlToPercent(wl) + '%');
            }
            bar.style.background = 'linear-gradient(to right, ' + stops.join(', ') + ')';
        }

        function createSpectralLine(wl, cls) {
            var line = document.createElement('div');
            line.className = cls || 'spectral-line';
            line.style.backgroundColor = wavelengthToRgb(wl);
            line.style.left = wlToPercent(wl) + '%';
            var tip = document.createElement('span');
            tip.className = 'wl-tooltip';
            tip.textContent = wl + 'nm';
            line.appendChild(tip);
            return line;
        }

        function buildMiniSpectrum(element) {
            var container = document.createElement('div');
            container.className = 'cb-mini-spectrum';
            ELEMENTS[element].forEach(function(wl) {
                if (wl >= 380 && wl <= 750) {
                    var line = document.createElement('div');
                    line.style.cssText = 'position:absolute;top:0;bottom:0;width:2px;left:' + wlToPercent(wl) + '%;background:' + wavelengthToRgb(wl);
                    container.appendChild(line);
                }
            });
            return container;
        }

        function showAllSpectra(highlight) {
            var grid = document.getElementById('spectrumGrid');
            if (!grid) return;
            grid.innerHTML = '';
            allElements.forEach(function(element) {
                var div = document.createElement('div');
                div.className = 'element-spectrum';
                if (highlight && selectedElements.indexOf(element) !== -1) div.classList.add('highlighted');
                if (overlayElement === element) div.classList.add('overlay-active');
                div.dataset.element = element;

                var label = document.createElement('div');
                label.className = 'element-label';
                label.textContent = element + '(' + ELEMENT_NAMES[element] + ')';

                var bar = document.createElement('div');
                bar.className = 'spectrum-bar';
                ELEMENTS[element].forEach(function(wl) {
                    if (wl >= 380 && wl <= 750) bar.appendChild(createSpectralLine(wl));
                });

                var scale = document.createElement('div');
                scale.className = 'wavelength-scale';
                scale.innerHTML = '<span>400</span><span>500</span><span>600</span><span>700</span>';

                div.appendChild(label);
                div.appendChild(bar);
                div.appendChild(scale);

                div.addEventListener('click', function() {
                    if (!selectedElements.length) return;
                    overlayElement = overlayElement === element ? null : element;
                    showAllSpectra(highlight);
                    updateOverlay();
                });

                grid.appendChild(div);
            });
        }

        function updateOverlay() {
            var quizBar = document.querySelector('#quizSpectrum .spectrum-bar');
            if (!quizBar) return;
            var old = quizBar.querySelectorAll('.spectral-line-overlay');
            for (var i = 0; i < old.length; i++) old[i].remove();
            if (!overlayElement) return;
            ELEMENTS[overlayElement].forEach(function(wl) {
                if (wl >= 380 && wl <= 750) {
                    var line = document.createElement('div');
                    line.className = 'spectral-line-overlay';
                    line.style.left = wlToPercent(wl) + '%';
                    line.style.backgroundColor = wavelengthToRgb(wl);
                    var tip = document.createElement('span');
                    tip.className = 'wl-tooltip';
                    tip.textContent = overlayElement + ' ' + wl + 'nm';
                    line.appendChild(tip);
                    quizBar.appendChild(line);
                }
            });
        }

        function generateQuiz() {
            var count = parseInt(document.getElementById('countSlider').value);
            overlayElement = null;
            selectedElements = [];
            while (selectedElements.length < count) {
                var el = allElements[Math.floor(Math.random() * allElements.length)];
                if (selectedElements.indexOf(el) === -1) selectedElements.push(el);
            }
            quizMode = document.getElementById('toggleEmission').classList.contains('active') ? 'emission' : 'absorption';
            showAllSpectra(false);
            showCombinedSpectrum();
            startTimer();
        }

        function showCombinedSpectrum() {
            var section = document.getElementById('quizSection');
            var quizSpectrum = document.getElementById('quizSpectrum');
            var checkboxDiv = document.getElementById('checkboxGrid');
            document.getElementById('resultMessage').innerHTML = '';
            section.classList.remove('hidden');

            var modeLabel = quizMode === 'emission' ? 'ë°©ì¶œ' : 'í¡ìˆ˜';
            quizSpectrum.innerHTML = '<h3>í˜¼í•© ' + modeLabel + ' ìŠ¤í™íŠ¸ëŸ¼ (' + selectedElements.length + 'ê°œ ì›ì†Œ)</h3>';

            var bar = document.createElement('div');
            bar.className = 'spectrum-bar';
            bar.style.height = '50px';

            if (quizMode === 'emission') {
                bar.style.background = '#000';
                selectedElements.forEach(function(el) {
                    ELEMENTS[el].forEach(function(wl) {
                        if (wl >= 380 && wl <= 750) bar.appendChild(createSpectralLine(wl));
                    });
                });
            } else {
                for (var wl = 380; wl <= 750; wl++) {
                    var px = document.createElement('div');
                    px.style.cssText = 'position:absolute;top:0;bottom:0;width:1px;left:' + wlToPercent(wl) + '%;background:' + wavelengthToRgb(wl);
                    bar.appendChild(px);
                }
                selectedElements.forEach(function(el) {
                    ELEMENTS[el].forEach(function(wl) {
                        if (wl >= 380 && wl <= 750) {
                            var line = document.createElement('div');
                            line.style.cssText = 'position:absolute;top:0;bottom:0;width:2px;left:' + wlToPercent(wl) + '%;background:#000;z-index:1';
                            var tip = document.createElement('span');
                            tip.className = 'wl-tooltip';
                            tip.textContent = wl + 'nm';
                            line.appendChild(tip);
                            bar.appendChild(line);
                        }
                    });
                });
            }

            var scale = document.createElement('div');
            scale.className = 'wavelength-scale';
            scale.innerHTML = '<span>400</span><span>500</span><span>600</span><span>700</span>';

            quizSpectrum.appendChild(bar);
            quizSpectrum.appendChild(scale);

            checkboxDiv.innerHTML = '';
            allElements.forEach(function(el) {
                var item = document.createElement('div');
                item.className = 'checkbox-item';
                item.dataset.element = el;
                var name = document.createElement('span');
                name.className = 'cb-name';
                name.textContent = el + '(' + ELEMENT_NAMES[el] + ')';
                item.appendChild(name);
                item.appendChild(buildMiniSpectrum(el));
                item.addEventListener('click', function() { this.classList.toggle('selected'); });
                checkboxDiv.appendChild(item);
            });
        }

        function checkAnswer() {
            stopTimer();
            var selected = [];
            document.querySelectorAll('.checkbox-item.selected').forEach(function(i) { selected.push(i.dataset.element); });
            var correct = selectedElements.slice();
            var matched = correct.filter(function(x) { return selected.indexOf(x) !== -1; });
            var resultDiv = document.getElementById('resultMessage');
            var isCorrect = matched.length === correct.length && matched.length === selected.length;

            if (isCorrect) {
                resultDiv.innerHTML = '<div class="result-message result-success">ì •ë‹µ! (' + matched.sort().join(', ') + ')</div>';
                spawnConfetti();
            } else {
                var section = document.getElementById('quizSection');
                section.classList.add('shake');
                setTimeout(function() { section.classList.remove('shake'); }, 400);
                resultDiv.innerHTML = '<div class="result-message result-partial">' + matched.length + '/' + correct.length + ' ì •ë‹µ. ë§ì¶˜: ' + (matched.length > 0 ? matched.sort().join(', ') : 'ì—†ìŒ') + ' | ì •ë‹µ: ' + correct.sort().join(', ') + '</div>';
            }
        }

        function startTimer() {
            stopTimer();
            if (!document.getElementById('timerToggle').checked) {
                document.getElementById('timerBar').classList.remove('active');
                return;
            }
            var bar = document.getElementById('timerBar');
            var fill = document.getElementById('timerFill');
            bar.classList.add('active');
            fill.style.width = '100%';
            fill.className = 'timer-bar-fill';
            var start = Date.now();
            timerInterval = setInterval(function() {
                var remaining = 30000 - (Date.now() - start);
                if (remaining <= 0) { stopTimer(); checkAnswer(); return; }
                var pct = (remaining / 30000) * 100;
                fill.style.width = pct + '%';
                fill.className = 'timer-bar-fill' + (pct < 20 ? ' danger' : pct < 50 ? ' warning' : '');
            }, 50);
        }

        function stopTimer() {
            if (timerInterval) { clearInterval(timerInterval); timerInterval = null; }
            document.getElementById('timerBar').classList.remove('active');
        }

        function spawnConfetti() {
            var colors = ['#ff6b6b','#feca57','#48dbfb','#ff9ff3','#54a0ff','#5f27cd','#01a3a4','#ff4757'];
            for (var i = 0; i < 40; i++) {
                var c = document.createElement('div');
                c.className = 'confetti';
                c.style.left = Math.random() * 100 + 'vw';
                c.style.background = colors[Math.floor(Math.random() * colors.length)];
                c.style.animationDuration = (1.5 + Math.random()) + 's';
                c.style.animationDelay = Math.random() * 0.5 + 's';
                document.body.appendChild(c);
                setTimeout(function(el) { el.remove(); }, 3000, c);
            }
        }

        function initDarkMode() {
            var btn = document.getElementById('darkToggle');
            if (localStorage.getItem('spectrum-dark-mode') === 'true') {
                document.body.classList.add('dark-mode');
                btn.textContent = 'ğŸŒ™';
            }
            btn.addEventListener('click', function() {
                document.body.classList.toggle('dark-mode');
                var isDark = document.body.classList.contains('dark-mode');
                btn.textContent = isDark ? 'ğŸŒ™' : 'â˜€ï¸';
                localStorage.setItem('spectrum-dark-mode', isDark);
            });
        }

        function initControls() {
            document.getElementById('toggleEmission').addEventListener('click', function() {
                this.classList.add('active');
                document.getElementById('toggleAbsorption').classList.remove('active');
            });
            document.getElementById('toggleAbsorption').addEventListener('click', function() {
                this.classList.add('active');
                document.getElementById('toggleEmission').classList.remove('active');
            });
            document.getElementById('countSlider').addEventListener('input', function() {
                document.getElementById('countLabel').textContent = this.value + 'ê°œ';
            });
            document.getElementById('btnStart').addEventListener('click', generateQuiz);
            document.getElementById('btnShowAnswer').addEventListener('click', function() { showAllSpectra(true); });
            document.getElementById('btnHideAnswer').addEventListener('click', function() { overlayElement = null; showAllSpectra(false); });
            document.getElementById('btnSubmit').addEventListener('click', checkAnswer);
        }

        function initModals() {
            document.getElementById('TutorialBtn').addEventListener('click', function() { document.getElementById('tutorialModal').classList.add('show'); });
            document.getElementById('closeTutorialModal').addEventListener('click', function() { document.getElementById('tutorialModal').classList.remove('show'); });
            document.getElementById('tutorialModal').addEventListener('click', function(e) { if (e.target === this) this.classList.remove('show'); });
            document.getElementById('DevLogBtn').addEventListener('click', function() { document.getElementById('devLogModal').classList.add('show'); });
            document.getElementById('closeModal').addEventListener('click', function() { document.getElementById('devLogModal').classList.remove('show'); });
            document.getElementById('devLogModal').addEventListener('click', function(e) { if (e.target === this) this.classList.remove('show'); });
        }

        function init() {
            initDarkMode();
            initControls();
            initModals();
            buildRefSpectrum();
            showAllSpectra();
        }

        if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', init);
        else init();
    </script>
</body>
</html>
